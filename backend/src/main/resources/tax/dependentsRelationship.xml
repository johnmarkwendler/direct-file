<?xml-model href="./FactDictionaryModule.rng"?>
<FactDictionaryModule>
  <Facts>

    <Fact path="/relationshipOptions">
      <Derived>
        <EnumOptions>
          <String>biologicalChild</String>
          <String>adoptedChild</String>
          <String>stepChild</String>
          <String>fosterChild</String>
          <String>grandChildOrOtherDescendantOfChild</String>
          <String>childInLaw</String>
          <String>sibling</String>
          <String>childOfSibling</String>
          <String>halfSibling</String>
          <String>childOfHalfSibling</String>
          <String>stepSibling</String>
          <String>childOfStepSibling</String>
          <String>otherDescendantOfSibling</String>
          <String>otherDescendantOfHalfSibling</String>
          <String>otherDescendantOfStepSibling</String>
          <String>siblingsSpouse</String>
          <String>siblingInLaw</String>
          <String>parent</String>
          <String>fosterParent</String>
          <String>siblingOfParent</String>
          <String>grandParent</String>
          <String>otherAncestorOfParent</String>
          <String>stepParent</String>
          <String>parentInLaw</String>
          <String>noneOfTheAbove</String>
        </EnumOptions>
      </Derived>
    </Fact>

    <Fact path="/relationshipCategoryOptions">
      <Derived>
        <EnumOptions>
          <String>childOrDescendants</String>
          <String>siblingOrDescendants</String>
          <String>parentOrAncestors</String>
          <String>inlaws</String>
          <String>notRelated</String>
        </EnumOptions>
      </Derived>
    </Fact>

    <Fact path="/childRelationshipOptions">
      <Derived>
        <EnumOptions>
          <String>biologicalChild</String>
          <String>adoptedChild</String>
          <String>stepChild</String>
          <String>fosterChild</String>
          <String>grandChildOrOtherDescendantOfChild</String>
        </EnumOptions>
      </Derived>
    </Fact>

    <Fact path="/siblingRelationshipOptions">
      <Derived>
        <EnumOptions>
          <String>sibling</String>
          <String>childOfSibling</String>
          <String>otherDescendantOfSibling</String>
          <String>halfSibling</String>
          <String>childOfHalfSibling</String>
          <String>otherDescendantOfHalfSibling</String>
          <String>stepSibling</String>
          <String>childOfStepSibling</String>
          <String>otherDescendantOfStepSibling</String>
        </EnumOptions>
      </Derived>
    </Fact>

    <Fact path="/parentalRelationshipOptions">
      <Derived>
        <EnumOptions>
          <String>parent</String>
          <String>stepParent</String>
          <String>fosterParent</String>
          <String>grandParent</String>
          <String>otherAncestorOfParent</String>
          <String>siblingOfParent</String>
        </EnumOptions>
      </Derived>
    </Fact>

    <Fact path="/inlawRelationshipOptions">
      <Derived>
        <EnumOptions>
          <String>childInLaw</String>
          <String>parentInLaw</String>
          <String>siblingInLaw</String>
          <String>siblingsSpouse</String>
        </EnumOptions>
      </Derived>
    </Fact>

    <Fact path="/familyAndHousehold/*/relationshipCategory">
      <Writable>
        <Enum optionsPath="/relationshipCategoryOptions" />
      </Writable>
    </Fact>

    <Fact path="/familyAndHousehold/*/relationshipCategoryIsChild">
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../relationshipCategory" />
          </Left>
          <Right>
            <Enum optionsPath="/relationshipCategoryOptions">childOrDescendants</Enum>
          </Right>
        </Equal>
      </Derived>
    </Fact>


    <Fact path="/familyAndHousehold/*/relationshipCategoryIsSibling">
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../relationshipCategory" />
          </Left>
          <Right>
            <Enum optionsPath="/relationshipCategoryOptions">siblingOrDescendants</Enum>
          </Right>
        </Equal>
      </Derived>
    </Fact>


    <Fact path="/familyAndHousehold/*/relationshipCategoryIsParent">
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../relationshipCategory" />
          </Left>
          <Right>
            <Enum optionsPath="/relationshipCategoryOptions">parentOrAncestors</Enum>
          </Right>
        </Equal>
      </Derived>
    </Fact>


    <Fact path="/familyAndHousehold/*/relationshipCategoryIsInlaw">
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../relationshipCategory" />
          </Left>
          <Right>
            <Enum optionsPath="/relationshipCategoryOptions">inlaws</Enum>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/familyAndHousehold/*/childRelationship">
      <Description>The type of child relationship.</Description>

      <Writable>
        <Enum optionsPath="/childRelationshipOptions" />
      </Writable>
    </Fact>

    <Fact path="/familyAndHousehold/*/siblingRelationship">
      <Description>The type of sibling relationship</Description>

      <Writable>
        <Enum optionsPath="/siblingRelationshipOptions" />
      </Writable>
    </Fact>

    <Fact path="/familyAndHousehold/*/parentalRelationship">
      <Description>The type of parental relationship</Description>

      <Writable>
        <Enum optionsPath="/parentalRelationshipOptions" />
      </Writable>
    </Fact>

    <Fact path="/familyAndHousehold/*/inlawRelationship">
      <Description>The type of inlaw relationship</Description>

      <Writable>
        <Enum optionsPath="/inlawRelationshipOptions" />
      </Writable>
    </Fact>

    <Fact path="/familyAndHousehold/*/relationship">
      <Name>Relationship to taxpayer</Name>
      <Description>The relationship of the dependent to the taxpayer(s).</Description>
      <Export downstreamFacts="true" stateSystems="true" />

      <Derived>
        <Switch>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="../relationshipCategory" />
                </Left>
                <Right>
                  <Enum optionsPath="/relationshipCategoryOptions">childOrDescendants</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <Switch>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../childRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/childRelationshipOptions">biologicalChild</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">biologicalChild</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../childRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/childRelationshipOptions">adoptedChild</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">adoptedChild</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../childRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/childRelationshipOptions">stepChild</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">stepChild</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../childRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/childRelationshipOptions">fosterChild</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">fosterChild</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../childRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/childRelationshipOptions">grandChildOrOtherDescendantOfChild</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">grandChildOrOtherDescendantOfChild</Enum>
                  </Then>
                </Case>
              </Switch>
            </Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="../relationshipCategory" />
                </Left>
                <Right>
                  <Enum optionsPath="/relationshipCategoryOptions">siblingOrDescendants</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <Switch>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../siblingRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/siblingRelationshipOptions">sibling</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">sibling</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../siblingRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/siblingRelationshipOptions">childOfSibling</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">childOfSibling</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../siblingRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/siblingRelationshipOptions">halfSibling</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">halfSibling</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../siblingRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/siblingRelationshipOptions">childOfHalfSibling</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">childOfHalfSibling</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../siblingRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/siblingRelationshipOptions">stepSibling</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">stepSibling</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../siblingRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/siblingRelationshipOptions">childOfStepSibling</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">childOfStepSibling</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../siblingRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/siblingRelationshipOptions">otherDescendantOfSibling</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">otherDescendantOfSibling</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../siblingRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/siblingRelationshipOptions">otherDescendantOfHalfSibling</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">otherDescendantOfHalfSibling</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../siblingRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/siblingRelationshipOptions">otherDescendantOfStepSibling</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">otherDescendantOfStepSibling</Enum>
                  </Then>
                </Case>
              </Switch>
            </Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="../relationshipCategory" />
                </Left>
                <Right>
                  <Enum optionsPath="/relationshipCategoryOptions">parentOrAncestors</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <Switch>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../parentalRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/parentalRelationshipOptions">parent</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">parent</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../parentalRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/parentalRelationshipOptions">siblingOfParent</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">siblingOfParent</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../parentalRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/parentalRelationshipOptions">grandParent</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">grandParent</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../parentalRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/parentalRelationshipOptions">fosterParent</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">fosterParent</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../parentalRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/parentalRelationshipOptions">otherAncestorOfParent</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">otherAncestorOfParent</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../parentalRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/parentalRelationshipOptions">stepParent</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">stepParent</Enum>
                  </Then>
                </Case>
              </Switch>
            </Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="../relationshipCategory" />
                </Left>
                <Right>
                  <Enum optionsPath="/relationshipCategoryOptions">inlaws</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <Switch>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../inlawRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/inlawRelationshipOptions">childInLaw</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">childInLaw</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../inlawRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/inlawRelationshipOptions">parentInLaw</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">parentInLaw</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../inlawRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/inlawRelationshipOptions">siblingInLaw</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">siblingInLaw</Enum>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <Equal>
                      <Left>
                        <Dependency path="../inlawRelationship" />
                      </Left>
                      <Right>
                        <Enum optionsPath="/inlawRelationshipOptions">siblingsSpouse</Enum>
                      </Right>
                    </Equal>
                  </When>
                  <Then>
                    <Enum optionsPath="/relationshipOptions">siblingsSpouse</Enum>
                  </Then>
                </Case>
              </Switch>
            </Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="../relationshipCategory" />
                </Left>
                <Right>
                  <Enum optionsPath="/relationshipCategoryOptions">notRelated</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <Enum optionsPath="/relationshipOptions">noneOfTheAbove</Enum>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/familyAndHousehold/*/relationshipCategoryIsImmediateChild">
      <Description>This is a biological, adopted, step, or foster child of the taxpayer</Description>
      <Export downstreamFacts="true" />

      <Derived>
        <All>
          <Dependency path="../relationshipCategoryIsChild" />
          <Not>
            <Equal>
              <Left>
                <Dependency path="../childRelationship" />
              </Left>
              <Right>
                <Enum optionsPath="/childRelationshipOptions">grandChildOrOtherDescendantOfChild</Enum>
              </Right>
            </Equal>
          </Not>
        </All>
      </Derived>
    </Fact>
    <Fact path="/familyAndHousehold/*/xmlRelationship">
      <Name>Relationship to Taxpayer (xml)</Name>
      <Description>
        The relationship of the dependent to the taxpayer(s) that the IRS 1040 XML expects. This fact maps
        the relationships Direct File (DF) uses to the relationships considered valid by the MeF system. DF does not
        collect gendered relationship data on the filer's dependents so the DF value is mapped to the corresponding MeF
        type using an arbitrary gender as the gender of dependents is not a consideration for tax calculations. For
        example, the DF values biologicalChild, adoptedChild, and childInLaw all map to the MeF value DAUGHTER. DAUGHTER
        was chosen for the mapped MeF value, but SON could have been used instead.
      </Description>
      <Export downstreamFacts="true" mef="true" />

      <Derived>
        <Switch>
          <Case>
            <When>
              <Any>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">biologicalChild</Enum>
                  </Right>
                </Equal>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">adoptedChild</Enum>
                  </Right>
                </Equal>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">childInLaw</Enum>
                  </Right>
                </Equal>
              </Any>
            </When>
            <Then>
              <String>DAUGHTER</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Any>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">grandChildOrOtherDescendantOfChild</Enum>
                  </Right>
                </Equal>
              </Any>
            </When>
            <Then>
              <String>GRANDCHILD</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Any>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">grandParent</Enum>
                  </Right>
                </Equal>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">otherAncestorOfParent</Enum>
                  </Right>
                </Equal>
              </Any>
            </When>
            <Then>
              <String>GRANDPARENT</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Any>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">childOfSibling</Enum>
                  </Right>
                </Equal>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">childOfHalfSibling</Enum>
                  </Right>
                </Equal>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">childOfStepSibling</Enum>
                  </Right>
                </Equal>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">otherDescendantOfSibling</Enum>
                  </Right>
                </Equal>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">otherDescendantOfHalfSibling</Enum>
                  </Right>
                </Equal>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">otherDescendantOfStepSibling</Enum>
                  </Right>
                </Equal>
              </Any>
            </When>
            <Then>
              <String>NEPHEW</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Any>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">parent</Enum>
                  </Right>
                </Equal>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">stepParent</Enum>
                  </Right>
                </Equal>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">parentInLaw</Enum>
                  </Right>
                </Equal>
              </Any>
            </When>
            <Then>
              <String>PARENT</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Any>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">sibling</Enum>
                  </Right>
                </Equal>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">siblingInLaw</Enum>
                  </Right>
                </Equal>
                <Equal>
                  <Left>
                    <Dependency path="../relationship" />
                  </Left>
                  <Right>
                    <Enum optionsPath="/relationshipOptions">siblingsSpouse</Enum>
                  </Right>
                </Equal>
              </Any>
            </When>
            <Then>
              <String>SISTER</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="../relationship" />
                </Left>
                <Right>
                  <Enum optionsPath="/relationshipOptions">stepChild</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <String>STEPCHILD</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="../relationship" />
                </Left>
                <Right>
                  <Enum optionsPath="/relationshipOptions">fosterChild</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <String>FOSTER CHILD</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="../relationship" />
                </Left>
                <Right>
                  <Enum optionsPath="/relationshipOptions">halfSibling</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <String>HALF SISTER</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="../relationship" />
                </Left>
                <Right>
                  <Enum optionsPath="/relationshipOptions">stepSibling</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <String>STEPBROTHER</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="../relationship" />
                </Left>
                <Right>
                  <Enum optionsPath="/relationshipOptions">siblingOfParent</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <String>UNCLE</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="../relationship" />
                </Left>
                <Right>
                  <Enum optionsPath="/relationshipOptions">fosterParent</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <String>OTHER</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="../relationship" />
                </Left>
                <Right>
                  <Enum optionsPath="/relationshipOptions">noneOfTheAbove</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <String>NONE</String>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>


    <Fact path="/familyAndHousehold/*/qcRelationshipTest">
      <Name>Relationship test</Name>
      <Description>Does the dependent's relationship to the taxpayer pass the Relationship test to be a qualifying
        child?</Description>
      <Export downstreamFacts="true" />

      <Derived>
        <Any>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">biologicalChild</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">adoptedChild</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">stepChild</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">fosterChild</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">sibling</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">halfSibling</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">stepSibling</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">otherDescendantOfSibling</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">otherDescendantOfStepSibling</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">otherDescendantOfHalfSibling</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">grandChildOrOtherDescendantOfChild</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">childOfSibling</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">childOfHalfSibling</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">childOfStepSibling</Enum>
            </Right>
          </Equal>
        </Any>
      </Derived>
    </Fact>

    <Fact path="/familyAndHousehold/*/qrRelationshipTest">
      <Name>Qualifying relative relationship</Name>
      <Description>The dependent has a relationship to the taxpayer for purposes of the relationship/member of household
        test that does not require the dependent to be a member of the household all year.
      </Description>
      <Export downstreamFacts="true" />

      <Derived>
        <Any>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">biologicalChild</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">adoptedChild</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">stepChild</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">fosterChild</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">sibling</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">stepSibling</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">halfSibling</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">grandChildOrOtherDescendantOfChild</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">childOfSibling</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">childOfHalfSibling</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">parent</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">stepParent</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">grandParent</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">otherAncestorOfParent</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">siblingOfParent</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">childInLaw</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">parentInLaw</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">siblingInLaw</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">siblingsSpouse</Enum>
            </Right>
          </Equal>
        </Any>
      </Derived>
    </Fact>

    <Fact path="/familyAndHousehold/*/marriedHohRelationshipTest">
      <Name>Relationship test</Name>
      <Description>
        If a filer is married, but filing as HoH, their QP must be one of these relationship types for HoH.
        This more restrictive relationship test does not apply to EITC, Dependents, or other credits.
      </Description>
      <Export downstreamFacts="true" />

      <Derived>
        <Any>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">biologicalChild</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">adoptedChild</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">stepChild</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency module="dependentsRelationship" path="../relationship" />
            </Left>
            <Right>
              <Enum optionsPath="/relationshipOptions">fosterChild</Enum>
            </Right>
          </Equal>
        </Any>
      </Derived>
    </Fact>

  </Facts>
</FactDictionaryModule>